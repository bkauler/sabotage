
[build]
#want to leave the sabotage-linux/sabotage repository intact.
#changes for building binary packages for Quirky Linux, where they
#conflict with main repo, are kept separate. This includes alternative
#recipes named with "qky-" prefix, for example "pkg/qky-e2fsprogs".

#as quirky is building libblkid and libuuid in util-linux (actually qky-util-linux),
#need to modify pkg/libuuid and pkg/libblkid, but have to do this at build-time...
echo '[deps]
qky-util-linux' > "$K"/../pkg/libuuid
echo '[deps]
qky-util-linux' > "$K"/../pkg/libblkid

#my alternative pkgs all have "qky-" prefix, ex 'qky-util-linux' installs as
# 'util-linux', need this for butch-core.
#this patch creates two entries in butch.db, ex 'qky-util-linux' and 'util-linux'...
sed -i -e 's%mv $BUTCHDB.tmp $BUTCHDB%tail -n 1 $BUTCHDB.tmp > tempxxx\ngrep "^qky-" tempxxx > tempzzz\nsed -e "s/^qky-//" tempzzz >> $BUTCHDB.tmp\nsed -i "/^$/d" $BUTCHDB.tmp\nmv -f $BUTCHDB.tmp $BUTCHDB\nrm -f tempxxx\nrm -f tempzzz%' "$R"/opt/butch/bin/butch-core


exit 0
